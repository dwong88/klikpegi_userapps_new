{"version":3,"sources":["../../src/pages/filter-modal/filter-modal.ts","../../src/pages/filter-modal/filter-modal.module.ts"],"names":[],"mappings":"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","file":"25.js","sourcesContent":["import {\n  Component,\n  NgZone\n} from '@angular/core';\nimport {\n  IonicPage,\n  NavController,\n  NavParams,\n  ViewController\n} from 'ionic-angular';\nimport { LocalDatabaseServiceProvider } from './../../providers/local-database-service/local-database-service';\n\n/**\n * Generated class for the FilterModalPage page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n@IonicPage()\n@Component({\n  selector: 'page-filter-modal',\n  templateUrl: 'filter-modal.html',\n})\nexport class FilterModalPage {\n  priceRange: any;\n  searchType = [];\n  priceMin: any = 0;\n  priceMax: any = 2000000;\n  sortType: any = [\n    {\n      title: \"NEAREST_RANGE\",\n      value: 'range',\n      checked: false\n    },\n    {\n      title: \"LOW_HIGH_PRICE\",\n      value: 'lohai',\n      checked: false     \n    },\n    {\n      title: \"HIGH_LOW_PRICE\",\n      value: 'hailo',\n      checked: false      \n    }\n  ];\n  categories = [\n    {\n      id: 0,\n      name: \"B&B\",\n      checked: 0\n    },\n    {\n      id: 1,\n      name: \"HOSTEL\",\n      checked: 0\n    },\n    {\n      id: 2,\n      name: \"APARTMENT\",\n      checked: 0\n    },\n    {\n      id: 3,\n      name: \"RESORT\",\n      checked: 0\n    }, \n    {\n      id: 4,\n      name: \"HOMESTAY\",\n      checked: 0\n    },\n    {\n      id: 5,\n      name: \"HOTEL\",\n      checked: 0\n    },\n    {\n      id: 6,\n      name: \"VILLA\",\n      checked: 0\n    }\n  ];\n  sortOpt;\n  config = [];\n  sortTypeValue: any;\n  filterValue: any;\n\n  constructor(public navCtrl: NavController, public navParams: NavParams, public viewCtrl: ViewController, public zone: NgZone, private localDatabaseProvider: LocalDatabaseServiceProvider) {\n    this.localDatabaseProvider.getDatabaseState().subscribe(ready => {\n      if (ready) {\n        this.loadSortFilterConfig();\n      }\n    });\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad FilterModalPage');\n  }\n\n  dismissModal() {\n    this.viewCtrl.dismiss();\n  }\n\n  loadSortFilterConfig() {\n    this.localDatabaseProvider.getSortFilterConfig().then(data => {\n      this.sortTypeValue = data[0]['sort_type']; \n      this.sortOpt = this.sortTypeValue;\n      this.priceMin = data[0]['sort_price_value_low'];\n      this.priceMax = data[0]['sort_price_value_high'];\n      this.filterValue = data[0]['filter_value'];\n      console.log(data);\n\n      for (let item of this.sortType) {\n        if (this.sortTypeValue == item.value) {\n          item.checked = true;\n          console.log(item.checked);\n        }\n      }\n\n      if (this.priceMax == 99999999) this.priceMax = 2000000;\n      this.priceRange = {\n        lower: this.priceMin,\n        upper: this.priceMax\n      };\n\n      console.log(this.filterValue);\n      if (this.filterValue != '' && this.filterValue != undefined) {  \n        var filter = this.filterValue.split(',');\n        console.log('split filter');\n        console.log(filter);\n        for (let item of filter) {\n          this.searchType.push(parseInt(item));\n          this.categories[item].checked = 1;\n        }\n      }\n    });\n  }\n\n  applyFilter() {\n    let params = {\n      sortOpt: this.sortOpt,\n      filterOpt: this.searchType,\n      priceRange: this.priceRange\n    }\n    this.localDatabaseProvider.updateSortFilterConfig(this.sortOpt, this.priceRange.lower, this.priceRange.upper, this.searchType.toString()).then(res => {\n      console.log(res);\n    });\n    this.viewCtrl.dismiss(params);\n  }\n\n  setSortType(data) {\n    this.sortOpt = data;\n  }\n\n  onChangeCategories(array, isChecked) {\n    this.zone.run(() => {\n      this.categories[array].checked = +isChecked;\n      console.log(\"clicked index\", array);\n      if (isChecked) {\n        this.searchType.push(array);\n        console.log(this.searchType);\n      }\n      else {\n        let index = this.searchType.indexOf(array);\n        console.log(array);\n        this.searchType.splice(index, 1);\n        console.log(this.searchType);\n      }\n    });\n  }\n\n  onPriceChange(data) {\n    this.zone.run(() => {\n      console.log(data);\n      this.priceMin = data.lower;\n      this.priceMax = data.upper;\n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/filter-modal/filter-modal.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { FilterModalPage } from './filter-modal';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [\n    FilterModalPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(FilterModalPage),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    FilterModalPage\n  ]\n})\nexport class FilterModalPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/filter-modal/filter-modal.module.ts"],"sourceRoot":""}